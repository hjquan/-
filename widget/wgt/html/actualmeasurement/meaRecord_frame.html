<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title></title>
    <!-- <link rel="stylesheet" type="text/css" href="../../../css/api.css"/> -->
    <!-- <link rel="stylesheet" type="text/css" href="../css/style.css"/> -->
    <link rel="stylesheet" href="../../../commonUi/aui/css/aui.css">
    <link rel="stylesheet" href="../../../commonUi/timeAxis/libs/index.css" />
    <style>
        .hover {
            opacity: 0.6;
        }

        .header_title {
            font-size: 18px;
            font-weight: 500;
            color: rgba(51, 51, 51, 1);
        }

        .flex_start {
            justify-content: flex-start !important;
        }


        .triange_bg:before {
            content: '';
            height: 26px;
            width: 26px;
            background: url('../../../image/triangle.png') 0 0 no-repeat;
            background-size: cover;
            position: absolute;
            top: 0;
            right: 0;
        }

        .color_999 {
            color: #999;
        }
        .txt_t{color: #323233;}
        .noData{
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height:500px;
        }
        .noData img{
            width: 100px;
            height:100px;
        }
        .aui-content .aui-list-item-inner .txt_t_r{
            font-size: 14px;
            color: #B4B4B4;
        }
        .aui-content .aui-list-item-inner .txt_b{
            color: #7E7E80;
        }
        .w_80{width: 70%}

        .txt_b_l{color: #7E7E80;font-size: 14px;}
        .color_ec{color:#EC4031}
        .list_item{
            height: 45px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #fff;
            margin-top: 1px;
            padding: 0 15px;
        }
        .list_item .input_t{
            max-width: 250px;
            text-align: right;
        }
        .list_item i{
            color:#058FFD;
        }
        .list_item i.active{
            color:#058FFD
        }
        .addBtn{
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50% );
            width:335px;
            height:40px;
            line-height: 40px;
            background-color:#C7C7CC;
            border-radius:6px;
            color:#fff;
            text-align: center;
            font-family:PingFangSC-Semibold,PingFang SC;
            font-weight:600;
            color:rgba(255,255,255,1);
        }
        .addBtn.active{background:rgba(5,143,253,1); }
        .add_btn_value{
            width:51px;
            height:25px;
            line-height: 25px;
            background:rgba(5,143,253,0.1);
            border-radius:4px;
            border:1px solid rgba(5,143,253,0.6);
            text-align: center;
        }
        .add_btn_value p{
            color: rgba(5,143,253,0.6) !important;
        }
        .txt_show_list{
            display: flex;
            justify-content: flex-start;
            align-content: center;
            flex-wrap: wrap;
            background-color: #fff;
        }
        .txt_list_item{
            width: 33.3%;
            display: flex;
            justify-content: center;;
            padding: 16px 0;
            font-size:13px;
            font-family:PingFangSC-Regular,PingFang SC;
            font-weight:400;
            color:rgba(69,73,86,1);
        }
        .txt_list_item p{margin-right: 10px;}
        .lf_txt{
            font-size:15px;
            font-family:PingFangSC-Regular,PingFang SC;
            font-weight:400;
            color:rgba(50,50,51,1);
        }
        .color_c7c7{
            font-size:15px;
            font-family:PingFangSC-Regular,PingFang SC;
            font-weight:400;
            color:rgba(199,199,204,1);
        }
        .color_active{
            color:#323233;
        }
        .local_box{
            display: flex;
            align-items: center;
            justify-content: flex-end;

        }
        .local_box input{max-width: 40px;}
        .txt_r{text-align: right;}
        .txt{
            font-size:13px;
            font-family:PingFangSC-Regular,PingFang SC;
            font-weight:400;
            color:rgba(5,143,253,1);
        }
        .color-suc{
            color:#15BC83
        }
        .color-er{
            color:#F47575;
        }
        .txt_see{
            /*font-size:15px;*/
            font-family:PingFangSC-Regular,PingFang SC;
            font-weight:400;
            color:#0076FF;
            /*line-height:15px;*/
        }
        .pl_20{padding-left: 20px}
        .icon_txt{
            width:6px;
            height:10px;
            color:#0076FF;;
            font-weight: bold;
            font-size: 12px;
        }
        .list{
            background-color: #fff;
            padding-bottom: 10px;
        }
        .list .item-inner .item-main .item-content{
            margin: 15px 0;
            margin-top: 0;
            color: #8F929A;
        }



    </style>
</head>

<body>
    <div id="app">
        <ul class="conten_box">
            <li class="list_item" style="border-bottom: 1px solid #f5f5f5">
                <div class="txt">
                    <p v-cloak>{{params_box.areaName + '_' + params_box.componentName + '_' + params_box.builontentds[0].name}}</p>
                    <p v-if="info.design">设计值: <span v-text="info.design"></span></p>
                </div>
                <div class="local_box">
                    <i class="aui-iconfont aui-icon-location active"></i>
                    <input type="text"  disabled v-model="params_box.itemDetail.describe">
                </div>
            </li>
        </ul>
        <div class="list" v-if="info.length">
            <div class="item-inner flex-box-x"  v-for="(item) in info">
                <div class="item-date">
                    <div class="date" style="font-size:12px;" v-text="item.createTime"></div>
                </div>
                <div class="dot"><i></i></div>
                <div class="item-main col-xs-x">
                    <div class="item-content" tapmode @click="call(item.phone)" >{{item.name}}<span v-cloak>( {{item.position}} )</span> &nbsp;&nbsp;&nbsp;<i class="aui-iconfont aui-icon-phone aui-text-info" ></i></div>
                    <div class="item-content pl_20 " >实测值: <span class="txt_see" tapmode @click="seeFn(item.datas)">点击查看 <i class="aui-iconfont aui-icon-right icon_txt"></i></span></div>
                    <div class="item-content pl_20" >合格否: <span class="color-suc" :class="{'color-er':item.isQualified == '1'}" v-text="item.isQualified == '0' ? '合格' : '不合格'"></span></div>
                </div>
            </div>

        </div>
        <div class="noData" v-else>
            <img src="../../../image/noData.png" alt="">
            <p>没有相关数据~</p>
        </div>

        <!-- <div class="addBtn "  @click="submit()">整改</div> -->
    </div>
    <script src="../../../script/api.js"></script>
    <script src="../../../script/sha1.js"></script>
    <script src="../../../script/common.js"></script>
    <script src="../../../script/vue.js"></script>
    <script type="text/javascript">
        apiready = function() {
            var dialogBox = api.require('dialogBox');
            api.parseTapmode();

            var vm = new Vue({
                el:'#app',
                data:{
                    'params_box':'',//接收参数
                    'info':'',//记录
                    'itemData':[],//当前数据


                },
                created:function(){
                    var data = api.pageParam.actual_info;
                    console.log($api.jsonToStr(data));
                    this.params_box = data;
                    this.init(data.itemDetail.dareaId)
                },
                methods:{
                    //关闭弹窗
                    close_lay:function(){
                        console.log('close');
                        this.isToggle = false;
                    },
                    //拨打电话
                    call:function(phone){
                        console.log(phone);
                        api.call({
                            type: 'tel_prompt',
                            number: phone
                        });
                    },
                    seeFn:function(data){
                        api.openFrame({
                            name: 'meaRecord_lay',
                            url: './meaRecord_lay.html',
                            rect: {
                                x: 0,
                                y: 0,
                                w: 'auto',
                                h: 'auto'
                            },
                            pageParam: {
                                'meaRecord_data': data
                            },
                            bounces: false,
                            bgColor: 'rgba(0,0,0,0)',
                            vScrollBarEnabled: true,
                            hScrollBarEnabled: true
                        });


                    },
                    //初始化记录列表
                    init:function(params){
                        var _this = this;
                        $app.post(
                            true,
                            getRecordList,
                            {
                                'dareaId':params
                            },
                            function(ret){
                                console.log($api.jsonToStr(ret.obj));
                                _this.info = ret.obj;
                            }
                        )
                    }
                },

            })

        }
    </script>
</body>

</html>
